<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تست پنل ادمین - هنر تنه</title>
    <link rel="stylesheet" href="admin-style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
        }
        
        .test-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #171717;
            margin-bottom: 1rem;
        }
        
        .test-result {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }
        
        .test-pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .test-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>تست پنل ادمین هنر تنه</h1>
        
        <div class="test-section">
            <h2 class="test-title">تست localStorage</h2>
            <div id="localStorageTest"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">تست sessionStorage</h2>
            <div id="sessionStorageTest"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">تست آپلود تصویر</h2>
            <div id="imageUploadTest"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">تست محصولات</h2>
            <div id="productsTest"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">تست عملکرد</h2>
            <div id="performanceTest"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">نتایج کلی</h2>
            <div id="overallResults"></div>
        </div>
    </div>

    <script>
        // Test functions
        function runTests() {
            testLocalStorage();
            testSessionStorage();
            testImageUpload();
            testProducts();
            testPerformance();
            showOverallResults();
        }
        
        function testLocalStorage() {
            const container = document.getElementById('localStorageTest');
            try {
                localStorage.setItem('test', 'test-value');
                const value = localStorage.getItem('test');
                if (value === 'test-value') {
                    container.innerHTML = '<div class="test-result test-pass">✅ localStorage کار می‌کند</div>';
                } else {
                    container.innerHTML = '<div class="test-result test-fail">❌ localStorage کار نمی‌کند</div>';
                }
                localStorage.removeItem('test');
            } catch (error) {
                container.innerHTML = '<div class="test-result test-fail">❌ خطا در localStorage: ' + error.message + '</div>';
            }
        }
        
        function testSessionStorage() {
            const container = document.getElementById('sessionStorageTest');
            try {
                sessionStorage.setItem('test', 'test-value');
                const value = sessionStorage.getItem('test');
                if (value === 'test-value') {
                    container.innerHTML = '<div class="test-result test-pass">✅ sessionStorage کار می‌کند</div>';
                } else {
                    container.innerHTML = '<div class="test-result test-fail">❌ sessionStorage کار نمی‌کند</div>';
                }
                sessionStorage.removeItem('test');
            } catch (error) {
                container.innerHTML = '<div class="test-result test-fail">❌ خطا در sessionStorage: ' + error.message + '</div>';
            }
        }
        
        function testImageUpload() {
            const container = document.getElementById('imageUploadTest');
            try {
                // Test FileReader
                if (typeof FileReader !== 'undefined') {
                    container.innerHTML = '<div class="test-result test-pass">✅ FileReader پشتیبانی می‌شود</div>';
                } else {
                    container.innerHTML = '<div class="test-result test-fail">❌ FileReader پشتیبانی نمی‌شود</div>';
                }
            } catch (error) {
                container.innerHTML = '<div class="test-result test-fail">❌ خطا در FileReader: ' + error.message + '</div>';
            }
        }
        
        function testProducts() {
            const container = document.getElementById('productsTest');
            try {
                // Test products data
                const testProducts = [
                    {
                        id: 1,
                        title: "تست محصول",
                        description: "توضیحات تست",
                        price: "تست قیمت",
                        image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZjBmMGYwIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+VGVzdDwvdGV4dD4KPC9zdmc+",
                        active: true
                    }
                ];
                
                localStorage.setItem('honartaneh_products', JSON.stringify(testProducts));
                const loadedProducts = JSON.parse(localStorage.getItem('honartaneh_products'));
                
                if (loadedProducts && loadedProducts.length > 0) {
                    container.innerHTML = '<div class="test-result test-pass">✅ ذخیره و بارگذاری محصولات کار می‌کند</div>';
                } else {
                    container.innerHTML = '<div class="test-result test-fail">❌ ذخیره و بارگذاری محصولات کار نمی‌کند</div>';
                }
            } catch (error) {
                container.innerHTML = '<div class="test-result test-fail">❌ خطا در محصولات: ' + error.message + '</div>';
            }
        }
        
        function testPerformance() {
            const container = document.getElementById('performanceTest');
            try {
                const startTime = performance.now();
                
                // Simulate some work
                for (let i = 0; i < 1000; i++) {
                    Math.random();
                }
                
                const endTime = performance.now();
                const duration = endTime - startTime;
                
                if (duration < 10) {
                    container.innerHTML = '<div class="test-result test-pass">✅ عملکرد خوب است (' + duration.toFixed(2) + 'ms)</div>';
                } else {
                    container.innerHTML = '<div class="test-result test-info">⚠️ عملکرد متوسط است (' + duration.toFixed(2) + 'ms)</div>';
                }
            } catch (error) {
                container.innerHTML = '<div class="test-result test-fail">❌ خطا در تست عملکرد: ' + error.message + '</div>';
            }
        }
        
        function showOverallResults() {
            const container = document.getElementById('overallResults');
            const results = document.querySelectorAll('.test-result');
            let passCount = 0;
            let failCount = 0;
            
            results.forEach(result => {
                if (result.classList.contains('test-pass')) {
                    passCount++;
                } else if (result.classList.contains('test-fail')) {
                    failCount++;
                }
            });
            
            const totalTests = results.length;
            const successRate = ((passCount / totalTests) * 100).toFixed(1);
            
            let overallClass = 'test-pass';
            if (failCount > 0) {
                overallClass = 'test-fail';
            }
            
            container.innerHTML = `
                <div class="test-result ${overallClass}">
                    <strong>نتایج کلی:</strong><br>
                    ✅ موفق: ${passCount}<br>
                    ❌ ناموفق: ${failCount}<br>
                    📊 نرخ موفقیت: ${successRate}%
                </div>
            `;
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>
